var e=Object.defineProperty,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,o=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&a(e,n,o[n]);if(s)for(var n of s(o))r.call(o,n)&&a(e,n,o[n]);return e},n=(e,a)=>{var o={};for(var n in e)t.call(e,n)&&a.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&s)for(var n of s(e))a.indexOf(n)<0&&r.call(e,n)&&(o[n]=e[n]);return o};import c,{AxiosError as i}from"axios";var l=class extends Error{constructor({message:e,headers:s,data:t,status:r=500}){super(e),this.headers=s,this.status=r,this.data=t}},d=class{constructor(e,s={}){for(const t in e){const r=e[t];if("string"!=typeof r)if("object"!=typeof r);else{const a=r,{headers:i={}}=a,l=n(a,["headers"]),d=c.create(o({headers:o(o({},s),i)},l));e[t]=d}else{const a=c.create({baseURL:r,headers:s});e[t]=a}}this.services=e}send(e){return s=this,t=arguments,r=function*(e,s={}){const t=this.services[e];if("string"==typeof t||"object"==typeof t)throw new Error("");return yield new Promise(((e,r)=>{t(s).then((s=>{e({headers:s.headers,data:s.data,status:s.status})})).catch((e=>{e instanceof i&&(e.response&&r(new l({message:e.response.statusText,status:e.response.status,headers:e.response.headers,data:e.response.data})),r(new l({message:"BAD_GATEWAY",status:502}))),r(new l({message:"INTERNAL_SERVER_ERROR"}))}))}))},new Promise(((e,a)=>{var o=e=>{try{c(r.next(e))}catch(e){a(e)}},n=e=>{try{c(r.throw(e))}catch(e){a(e)}},c=s=>s.done?e(s.value):Promise.resolve(s.value).then(o,n);c((r=r.apply(s,t)).next())}));var s,t,r}};export{l as GatewayError,d as default};